# DB
                                                                        #Нормальные формы.

  База данных- представленная в объективной форме совокупность самостоятельных материалов (статей, нормативных актов, судебных решений и иных подобных материалов), систематезированных таким образом, чтобы эти материалы могли быть найдены и обработаны с помощью электронной вычислительной машиной(ЭВМ) 
  СУБД- это совокупность программных и лингвистических средств общего или специального назначения,обеспечивающих управления создания и использования баз данных. 
  Реалиционные базы данных: (realition отношения) данные хранятся в таблицах и таблицы между собой взаимосвязаны. SQL (structured qury language) - язык структурированных запросов, которых позволять создавать, изменять и управлять данными. 
  Реалиционные СУБД: 
  1 MySql 
  2 MS SQL - под Windows 
  3 Oracle 
  4 PostgreSql 
  
  В базе Данных количество столбцов всегда ограничено и они создаются при проектировании существует набор правил который уберегают нас от подобных рода ошибок, эти правила называются Нормальными Формами
  В базе данных кол-во столбцов всегда ограничено и они создаются изначально при проектировании. Существуют правила, которые оберегают нас от подобного рода ошибок. Эти правила называются !Нормальными формами!.
    -Правило 1. Все элементы внутри ячеек должны быть атамарными. Элемент является атамарным, если его нельзя разделить на части, которые могут использовать таблицы не зависимо друг от друга.                                                           
    -Правило 2. Все строки должны быть различны. Если в таблице товара будет два платья одинакового бренда, то мы создадим ситуацию, которая нарушает правило номер 2. Выйти из этой ситуации можно создав ещё один столбец, который позволит все строки таблицы сделать уникальными. В данном случае - это *артикул*. Такой столбец называется **первичным ключом**.

  Если таблица удовлетворяет этим двум правилам: все строки должны быть различными; все элементы должны быть атамарными - говорят что таблица удовлетворяет первой нормальной форме. (INF)
    -Правило 3. Любое поле теблицы, не входящее в состав первичного ключа, функционально полно зависит от первичного ключа. Поэтому мы создаём ещё одну таблицу. И назовём её **категория товаров**

  Первичный ключ, перенесённый из таблицы "категория товаров" в таблицу "товары" называется вторичным **ключом**
Таблица "База данных", удовлетворяющая трём перечисленным правилам удовлетворяет **второй нормальной формы**.

  Чтобы избежать ошибок связанных с опечатками таблица должна удовлетворять **третьей нормальной форме**. Если таблица удовлетворяет всем предыдущим правилам и любой её не ключевой атрибут функционально зависит только от первичного ключа. Для этого воспользуемся приёмом аналогичным предыдущему примеру, а именно для каждого столбца таблиц "тип товаров", "категория" и "бренды"  создадим отдельные таблицы.
  
Когда переносим идентификаторы вновь созданных таблиц в столбцы таблицы товаров, то эти ID ссылаются на строки в других таблицах и называются вторичными ключами.


https://docs.google.com/spreadsheets/d/1iOQesu_7jIX8eMMIjo5PNQpF_pVDtl5TmZ5E5VbfHuY/edit?usp=sharing

                                                    #Проектирование баз данных. Модель «сущность –связь

  Процесс создания базы данных
    * Определение требований.
    * Выбор СУБД и разработка структуры БД с учетом особенностей СУБД.
    * Реализация.
    * Тестирование, разработка документации, сопровождение
   
   Определение требований – **моделирование**
    *	Изучения понятий и описаний.
    * Описание информационных объектов или понятий предметной области и связей между ними.
    *	Описание ограничений целостности
  
  **Закон Мерфи** (16-й закон систематики) - Сложная система, спроектированная наспех, никогда не работает, и исправить ее, чтобы заставить работать, невозможно
  **Семантическая модель** (или концептуальная модель,инфологическая модель) – модель предметной области, предназначенная для представления семантики предметной области на самом высоком уровне абстракции

  Уровни абстракции базы данных:
    * внешняя схема;
    * концептуальный уровень;
    * внутренняя модель
  Трехуровневая архитектура (инфологический,даталогический и физический уровни) позволяет обеспечить независимость хранимых данных от использующих их программ

  Назначение диаграммы **«сущность–связь»**:
    * проектирование баз данных;
    * идентификация понятий предметной области и связей между ними;
    * графическое представление логической структуры базы данных.
    
   ##Модель «сущность - связь». Сущность
  **Сущность** – это единичное, обладающее самостоятельностью, в отличие от его состояний и отношений, которые являются изменчивыми и зависят от времени, места, от связей с другими сущностями
  
  **Атрибуты**
    * Атрибуты – это отдельные характеристики объекта.
    * Каждый атрибут имеет уникальное имя. 
    * Каждый атрибут имеет свой тип данных. 
    * Сущность может обладать любым количеством атрибутов.
    * Значение атрибута атомарно.
    * Сущность и ее атрибуты на диаграмме соединяются ненаправленными дугами.
    * Значения атрибутов выбираются из соответствующего множества значений.
  
  **Идентификация сущностей**
    * Идентификация сущностей – возможность отличимости.
    * Сущности идентифицируются специально выделенными атрибутами
  
  **3 вида идентификации:**
    * естественные ключи;
    * «по положению»;
    * суррогатные.
  
  **Модель «сущность - связь».** 
    * Связь – ассоциирование двух или более сущностей.
    * Требование к организации базы данных – обеспечение возможности отыскания одних сущностей по значениям других
    * Связи – это отношения между объектами.
    * Связь – упорядоченный набор сущностей.
    * Идентификатор связи включает в себя идентификаторы сущностей, в них участвующих
    
  **Свойства связей**
    * Связи могут иметь собственные атрибуты.
    * Подобные связи объединяются в множества.
    * Связи не могут существовать без связываемых сущностей.
    * Ключ связи состоит из ключей связываемых сущностей и, возможно, выделенных атрибутов связи
    
  **Классификация связей: *размерность***
    * Бинарные.
    * Тернарные.
    * N-арные.
    * Рекурсивные
    
   **Мощность бинарной связи Делятся на три вида в зависимости от количества участвующих в них сущностей:**
    * «один-к-одному» 1:1;
    * «один-ко-многим» 1:N;
    * «многие-ко-многим» M:N
    
   **Модальность связей**
    * «Может»: экземпляр одной сущности может быть связан с одним или несколькими экземплярами другой сущности, а может быть и не связан ни с одним экземпляром.
    * «Должен»: экземпляр одной сущности обязан быть связанным не менее чем с одним экземпляром другой сущности
    
   **Шаги при создании ERD:**
    * определить сущности;
    * определить атрибуты сущностей;
    * определить первичные ключи;
    * определить связи между сущностями;
    * определить кардинальность связей;
    * нарисовать ERD;
    * проверить ERD.

    ##Реляционная алгебра. Нормализация реляционных отношений

   **Модель данных**
    ! Определяет абстракцию данных для приложений !
    * Включает:
    * структуры данных;
    * операции;
    * зависимости;
    * ограничения.

   **Концептуальные модель данных**
    * иерархическая
    * сетевая;
    * реляционная;
    * объектно-реляционная

  **Реляционная модель – структуры данных**
    * Домены – множества, элементы которых рассматриваются как скалярные значения.
    * Отношения – предикаты, заданные на прямом произведении доменов.
    * Атрибуты – аргументы отношений

  **Терминология**
    * Экземпляр – конкретное наполнение базы данных.
    * Конкретное наполнение таблицы – тело отношения.
    * Совокупность атрибутов отношения – заголовок отношения (схема).
    * Заголовок + тело = значение отношения.
    * Строка таблицы – кортеж

  **Сущности**
    * Сущности – таблицы.
    * Имя сущности – имя отношения.
    * Атрибут – столбец.
    * Уникальный идентификатор сущности – ключ отношения

  **Ключ**
    * Возможный ключ – минимальный набор атрибутов,от которого функционально зависят все остальные.
    * Первичный ключ – один из возможных ключей.
    * Ключевые атрибуты – атрибуты, входящие в состав возможного ключа.

  **Связи**
    * Связи хранятся в отношениях.
    * Схема отношения составляется из ключевых атрибутов объектов, участвующих в связи, и атрибутов самой связи (если такие есть)

  **Недостатки «плохих» отношений:**
    * трудности с извлечением некоторых данных;
    * избыточность;
    * аномалии изменения;
    * аномалии удаления;
    * аномалии добавления
    
 **Ключ**  – минимальный набор атрибутов, который функционально определяет все остальные


    ##СОЗДАНИЕ И УДАЛЕНИЕ БД. СОЗДАНИЕ И УДАЛЕНИЕ ТАБЛИЦ. ЯЗЫК ЗАПРОСОВ SQL
  В Workbench MySQL база данных называется схемой. Для создания новой базы на любом месте нажимаем правую кнопку мыши и выбираем "Create Schema". ВТорым шагом переименовываем схему на английском языке. И нажимаем "Apply"

https://drive.google.com/drive/folders/14EYxA-DJGx1xgsjc0zKRHVMaVUc-edJX?usp=sharing

    ##Основные объекты базы и их описание на языке SQL

  **Операторы для создания и удаления базы данных**
    • Создание: CREATE DATABASE.
    • Удаление: DROP DATABASE.
    • Например: CREATE DATABASE student_life.
    
  !Примечание: в некоторых СУБД существует еще один существенный объект – схема (SCHEMA), который используется как контейнер, содержащий упомянутые выше объекты. В этом случае база данных рассматривается как множество схем.!
  
**Объекты базы данных**
    • таблицы (TABLE);
    • индексы (INDEX);
    • правила целостности (CONSTRAINT);
    • представления (VIEW);
    • процедуры (PROCEDURE);
    • функции (FUNCTION);
    • триггеры (TRIGGER).
    
  **Таблицы**
    • Таблицы – единицы хранения данных в базе.
    • Таблица имеет:
    • сolumns (колонки);
    • rows (записи).
    • Записи таблицы содержат сведения о сущностях.
    • Поля таблицы – это атрибуты сущностей

  **Процедуры/Функции**
    • Это блок операторов, написанных на процедурном расширении языка SQL в контексте конкретной СУБД.
    • Хранятся непосредственно в базе данных в специально приспособленных для этого системных таблицах.
    • Процедуры и функции могут быть вызваны на исполнение внутри базы данных (из других процедур и триггеров) или из клиентского приложения. 
    
  **Триггеры**
    • Это программный код, который автоматически вызывается при наступлении некоторого события в базе данных.
    • События делятся на системные и объектные.
    • Триггеры применяются для гарантированного выполнения определенных действий при возникновении определенных событий.
    • Триггеры носят глобальный характер и не зависят от причин и способов появления событий, на которые они срабатывают. 
    
  **SQL. Structured Query Language**
     **SQL** – это широко распространенный и стандартизированный язык, который используетсядля работы с реляционными базами данныхи поддерживается         большинствомпроизводителей СУБД

  **Типы данных** (наиболее распространенные)
    • целочисленные значения;
    • вещественные значения;
    • строки фиксированной длины;
    • строки переменной длины;
    • дата и время

https://drive.google.com/drive/folders/1V0CrEPWIJxFnU_2QIrKeoLlJz2XQiRIo?usp=sharing

    ##Заполнение таблиц
- С помощью графического редактора
- с помощью команды SQL


    ##Основные понятия реляционных баз данных
  Реляционная модель была разработана в конце 1960-х годов Е.Ф.Коддом . Она определяет способ представления данных (структуру данных), методы защиты данных (целостность данных), и операции, которые можно выполнять с данными (манипулирование данными). Эта модель лежит в основе всех реляционных баз данных до настоящего времени.

**Основные принципы реляционных баз данных:**
  * все данные на концептуальном уровне представляются в виде объектов, заданных в виде строк и столбцов, называемых отношением, более распространенное название – таблица;
  * в пересечение строки и столбца таблицы можно занести только одно значение;
все операции выполняются над целыми отношениями и результатом этих операций является отношение.

  **Отношение, реляционная модель**
  База данных, в том числе и реляционная, используется для формального описания  некоторой предметной области реального мира, например, склада, учебного процесса и пр. Обязательным этапом перед созданием базы данных является ее проектирование (этот процесс разбирается в следующих модулях).

**Перед созданием таблицы в базе данных необходимо описать ее структуру. Для этого выполняется следующая последовательность шагов:**

  1. Дать таблице имя, пусть она будет называться book, вот некоторые правила для выбора имен таблиц:
  * может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
  * имя должно быть уникальным в пределах базы данных.
  
  Также рекомендуется:

  * чтобы имя было существительным в единственном числе;
  * имя должно быть понятным и соответствовать тому объекту, который оно описывает;
  * имя должно быть как можно короче, максимум до 10 символов.
  * Важно. Имена таблиц являются регистрозависимыми из-за операционной системы на которой работает stepik, то есть имя book и Book – разные имена. Рекомендуется для записи имен таблиц использовать только строчные (маленькие) буквы.

  2. Определить структуру таблицы, из каких атрибутов(столбцов, полей) она будет состоять,  в нашем случае это:
  * title – поле для хранения названия книги;
  * author – поле с фамилией автора книги ;
  * priсe – цена книги;
  * amount – количество книг.

  Правила по выбору имени поля информационного объекта:
  * может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
  * имя поля должно быть уникальным в пределах таблицы.

  Рекомендации по выбору имени поля информационного объекта:
  * имя должно быть понятным и соответствовать тем данным, которые хранятся в поле;
  *имя может состоять из нескольких слов, тогда слова разделяются подчеркиванием, после подчеркивания слово пишется с маленькой буквы.
  
  3. Включить ключевое поле book_id, которое является ОБЯЗАТЕЛЬНЫМ ЭЛЕМЕНТОМ каждой реляционной таблицы. Ключевое поле является уникальным для каждой записи, однозначно определяет запись и в дальнейшем будет использоваться для связей с другими таблицами.

  ###Выборка отдельных столбцов
  
Для того чтобы отобрать данные из определенных столбцов таблицы используется SQL запрос следующей структуры: 
  * ключевое слово SELECT ; 
  * список столбцов таблицы через запятую; 
  * ключевое слово FROM ; 
  * имя таблицы.


https://drive.google.com/drive/folders/1benFSXNssyPr6IJv7UyPErURjTeKLaQ3?usp=sharing


https://docs.google.com/document/d/1eRG0o7x3S74qd989JneNudzw3ZflzIIG94ar0EjguqE/edit?usp=sharing


        #Заполнение таблиц:
    #с помощью графического редактора
    #с помощью команды sql - insert

Все команды начинаются с указания той базы данных, в которой вы работаете

**use shop;**

Команда **SELECT** 
1. если хотим вывести все атрибуты данной таблицы(всю таблицу целиком)    
  SELECT*FROM (таблица);
2. SELECT*FROM category WHERE id=3;
3. SELECT*FROM category WHERE discount <>0;
4. SELECT*FROM category WHERE discount >5;
5. SELECT*FROM category WHERE (discount > 5) AND (discount < 15);
6. SELECT*FROM category WHERE (discount < 5) OR (discount >= 10);
7. SELECT*FROM category WHERE NOT (discount <5);
8. SELECT*FROM category WHERE alias_name IS NOT FULL
9. SELECT*FROM category WHERE alies_name IS FULL

INSERT INTO category (id, name, discount, alias_name) VALUES (3, 'Женская обувь', 10, NULL);
INSERT INTO category (id, name, discount, alias_name) VALUES (4, 'Мужская обувь', 15, 'man''s shoes')
INSERT INTO category (name, discount) VALUES ('Шляпы', 0);































































































































































































































































